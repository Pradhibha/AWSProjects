{"ast":null,"code":"var _jsxFileName = \"C:\\\\Learning\\\\amazon-cognito-identity-management-workshop\\\\website\\\\src\\\\pages\\\\MainApp.js\";\nimport React from 'react';\nimport BaseMap from '../components/BaseMap';\nimport ESRIMap from '../components/ESRIMap';\nimport { Auth } from 'aws-amplify';\nimport awsConfig from '../amplify-config';\nimport '../css/ride.css';\nimport { Link } from 'react-router-dom';\n\nclass MainApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authToken: null,\n      idToken: null,\n      requestRideEnabled: false,\n      apistatus: false,\n      updates: ['Welcome! Click the map to set your pickup location.']\n    };\n  }\n\n  async componentDidMount() {\n    const session = await Auth.currentSession();\n    this.setState({\n      authToken: session.accessToken.jwtToken\n    });\n    this.setState({\n      idToken: session.idToken.jwtToken\n    });\n  }\n  /**\r\n   * Determines if the API is enabled\r\n   *\r\n   * @return {Boolean} true if API is configured\r\n   */\n\n\n  hasApi() {\n    const api = awsConfig.API.endpoints.filter(v => v.endpoint !== '');\n    return typeof api !== 'undefined';\n  }\n\n  async onClick() {\n    if (!this.state.pin) {\n      console.error('No pin present - skipping');\n      return true;\n    }\n\n    const updates = ['Requesting Unicorn'];\n\n    try {\n      this.setState({\n        requestRideEnabled: false,\n        updates\n      });\n      updates.push([`Your unicorn, Giddy will be with you at latitude ${this.state.pin.latitude} and ${this.state.pin.longitude}`]);\n      this.setState({\n        updates\n      });\n      setTimeout(() => {\n        console.log('Ride Complete');\n        const updateList = this.state.updates;\n        updateList.push([`giddy has arrived`]);\n        this.setState({\n          updates: updateList,\n          requestRideEnabled: false,\n          apistatus: true,\n          pin: null\n        });\n      }, 3 * 1000);\n    } catch (err) {\n      console.error(err);\n      updates.push(['Error finding unicorn']);\n      this.setState({\n        updates\n      });\n    }\n  }\n  /**\r\n   * Called when the mapClick happens\r\n   * @param {Point} position the position of the map pin\r\n   */\n\n\n  onMapClick(position) {\n    console.log(`onMapClick(${JSON.stringify(position)})`);\n    this.setState({\n      pin: position,\n      requestRideEnabled: true\n    });\n  }\n\n  render() {\n    const hasApi = this.hasApi(); // If API is not configured, but auth is, then output the\n    // token.\n\n    if (!hasApi) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(BaseMap, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"configMessage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"backdrop\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"panel panel-default\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"panel-heading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"panel-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, \"Successfully Authenticated!\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"panel-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, \"This page is not functional yet because there is no API configured.\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, \"Here is your user's identity token:\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"idToken\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, this.state.idToken)))));\n    } // If the API is configured, then display the \"requestUnicorn\"\n    // button.  If data is available (i.e. unicorn is requested),\n    // then display the additional patterns (unicorn on map).\n\n\n    const updateList = this.state.updates.map((v, i) => /*#__PURE__*/React.createElement(\"li\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, v));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info panel panel-default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        color: 'black'\n      },\n      to: '/profile',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 59\n      }\n    }, \"BACK TO PROFILE\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"request\",\n      className: \"btn btn-primary\",\n      disabled: !this.state.requestRideEnabled,\n      onClick: () => this.onClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, \"Request\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"ol\", {\n      id: \"updates\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, updateList), this.state.apistatus ? /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://3zqob10i5l.execute-api.us-east-1.amazonaws.com/Prod\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 35\n      }\n    }, \"click here to know the status\") : '')), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ESRIMap, {\n      onMapClick: position => {\n        this.onMapClick(position);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default MainApp;","map":{"version":3,"sources":["C:/Learning/amazon-cognito-identity-management-workshop/website/src/pages/MainApp.js"],"names":["React","BaseMap","ESRIMap","Auth","awsConfig","Link","MainApp","Component","constructor","props","state","authToken","idToken","requestRideEnabled","apistatus","updates","componentDidMount","session","currentSession","setState","accessToken","jwtToken","hasApi","api","API","endpoints","filter","v","endpoint","onClick","pin","console","error","push","latitude","longitude","setTimeout","log","updateList","err","onMapClick","position","JSON","stringify","render","map","i","color"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport BaseMap from '../components/BaseMap';\r\nimport ESRIMap from '../components/ESRIMap';\r\nimport { Auth } from 'aws-amplify';\r\nimport awsConfig from '../amplify-config';\r\nimport '../css/ride.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nclass MainApp extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      authToken: null,\r\n      idToken: null,\r\n      requestRideEnabled: false,\r\n      apistatus:false,\r\n      updates: [\r\n        'Welcome! Click the map to set your pickup location.'\r\n      ]\r\n\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const session = await Auth.currentSession();\r\n    this.setState({ authToken: session.accessToken.jwtToken });\r\n    this.setState({ idToken: session.idToken.jwtToken });\r\n  }\r\n\r\n  /**\r\n   * Determines if the API is enabled\r\n   *\r\n   * @return {Boolean} true if API is configured\r\n   */\r\n  hasApi() {\r\n    const api = awsConfig.API.endpoints.filter(v => v.endpoint !== '');                                                   \r\n    return (typeof api !== 'undefined');\r\n  }\r\n\r\n  \r\n  async onClick() {\r\n    if (!this.state.pin) {\r\n      console.error('No pin present - skipping');\r\n      return true;\r\n    }\r\n\r\n    const updates = [ 'Requesting Unicorn' ];\r\n    try {\r\n      this.setState({\r\n        requestRideEnabled: false,\r\n        updates\r\n      });\r\n     \r\n      updates.push([ `Your unicorn, Giddy will be with you at latitude ${this.state.pin.latitude} and ${this.state.pin.longitude}` ]);\r\n      this.setState({ updates });\r\n\r\n      \r\n      setTimeout(() => {\r\n        console.log('Ride Complete');\r\n        const updateList = this.state.updates;\r\n        updateList.push([ `giddy has arrived` ]);\r\n        this.setState({\r\n          updates: updateList,\r\n          requestRideEnabled: false,\r\n          apistatus: true,\r\n          pin: null\r\n        });\r\n      }, 3 * 1000);\r\n    } catch (err) {\r\n      console.error(err);\r\n      updates.push([ 'Error finding unicorn' ]);\r\n      this.setState({ updates });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when the mapClick happens\r\n   * @param {Point} position the position of the map pin\r\n   */\r\n  onMapClick(position) {\r\n    console.log(`onMapClick(${JSON.stringify(position)})`);\r\n    this.setState({ pin: position, requestRideEnabled: true });\r\n  }\r\n\r\n  render() {\r\n    const hasApi = this.hasApi();\r\n\r\n    // If API is not configured, but auth is, then output the\r\n    // token.\r\n    if (!hasApi) {\r\n      return (\r\n        <div>\r\n          <BaseMap/>\r\n          <div className=\"configMessage\">\r\n            <div className=\"backdrop\"></div>\r\n            <div className=\"panel panel-default\">\r\n              <div className=\"panel-heading\">\r\n                <h3 className=\"panel-title\">Successfully Authenticated!</h3>\r\n              </div>\r\n              <div className=\"panel-body\">\r\n                <p>This page is not functional yet because there is no API configured.</p>\r\n                <p>Here is your user's identity token:</p>\r\n                <p className=\"idToken\">{this.state.idToken}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // If the API is configured, then display the \"requestUnicorn\"\r\n    // button.  If data is available (i.e. unicorn is requested),\r\n    // then display the additional patterns (unicorn on map).\r\n    const updateList = this.state.updates.map(\r\n      (v, i) => <li key={i}>{v}</li>\r\n    );\r\n    return (\r\n      \r\n      <div>\r\n        \r\n        <div className=\"info panel panel-default\">\r\n        <Link style={{ color: 'black' }} to={'/profile'} ><b>{\"BACK TO PROFILE\"}</b></Link>\r\n        \r\n          <div className=\"panel-heading\">\r\n            <button id=\"request\" className=\"btn btn-primary\" disabled={!this.state.requestRideEnabled} onClick={() => this.onClick()}>Request</button>\r\n          </div>\r\n          \r\n          <div className=\"panel-body\">\r\n            <ol id=\"updates\">{updateList}</ol>\r\n            {this.state.apistatus?<a href=\"https://3zqob10i5l.execute-api.us-east-1.amazonaws.com/Prod\">click here to know the status</a>:''}\r\n            \r\n          </div>\r\n         \r\n        </div>\r\n        <div id=\"main\">\r\n          <ESRIMap onMapClick={(position) => { this.onMapClick(position); }}/>\r\n        </div>\r\n      </div>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nexport default MainApp;\r\n"]},"metadata":{},"sourceType":"module"}